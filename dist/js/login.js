document.addEventListener("DOMContentLoaded",function(){jQuery(function(e){var t=e("#lg"),n=e("#rg"),a=e(".loginw"),o=e(".regw");t.on("click",function(){a.css("display","block"),o.css("display","none"),n.css("background","#F7F7F9"),t.css("background","white"),n.css("color","black")}),n.on("click",function(){a.css("display","none"),o.css("display","block"),t.css("background","#F7F7F9"),n.css("background","white"),t.css("color","black")})});var c=document.getElementById("username"),r=document.getElementById("passwd"),e=document.getElementById("registerBtn"),t=document.getElementById("login"),n=document.querySelector(".tips"),d=[200,304];function u(){var e=""+parseInt(10*Math.random())+parseInt(10*Math.random())+parseInt(10*Math.random())+parseInt(10*Math.random());getCodeBtn.value=e}c.onblur=function(){var e=new XMLHttpRequest;e.onreadystatechange=function(){4==e.readyState&&-1!=d.indexOf(e.status)&&(n.innerHTML=e.responseText)},e.open("get","../api/register.php?uname="+c.value,!0),e.send(null)},e.onclick=function(){var e=c.value;if(0==e.length)console.log(e),alert("账号不能为空");else if(0==r.value.length)alert("密码不能为空");else{var t=document.getElementById("codeMa"),n=document.getElementById("getCodeBtn"),a=t.value;if(a==n.value){var o=new XMLHttpRequest;o.onreadystatechange=function(){4==o.readyState&&-1!=d.indexOf(o.status)&&(alert(o.responseText),window.location.href="../index.html")},o.open("get","../api/reg.php?username=".concat(c.value,"&passwd=").concat(r.value,"&registerBtn=").concat(!0),!0),o.send(null);var l=c.value,s=new Date;s.setDate(s.getDate()+7),Cookie.setCookie("uname",l,s,"/")}else 0==a.length?alert("请输入验证码"):(alert("验证码错误"),t.value="",u())}},getCodeBtn.onclick=u;var o=document.getElementById("getCode"),l=document.getElementById("uname"),s=document.getElementById("pwd"),i=document.getElementById("code");function g(){var e=""+parseInt(10*Math.random())+parseInt(10*Math.random())+parseInt(10*Math.random())+parseInt(10*Math.random());o.value=e}t.onclick=function(){var e=i.value;if(e==o.value){var t=new XMLHttpRequest;t.onreadystatechange=function(){4==t.readyState&&-1!=d.indexOf(t.status)&&(alert(t.responseText),"登录成功"==t.responseText&&(window.location.href="../index.html"))},t.open("get","../api/login.php?uname=".concat(l.value,"&pwd=").concat(s.value),!0),t.send(null);var n=l.value,a=new Date;a.setDate(a.getDate()+7),Cookie.setCookie("uname",n,a,"/")}else 0==e.length?alert("请输入验证码"):(alert("验证码错误"),i.value="",g())},o.onclick=g});