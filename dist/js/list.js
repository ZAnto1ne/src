document.addEventListener("DOMContentLoaded",function(){jQuery(function(a){var e=a(".xl"),t=a(".xl .ej"),n=a(".xl .ej .sj");e.on("mouseover",function(){t.css("display","block")}).on("mouseout",function(){t.css("display","none")}),t.on("mouseover",function(){n.css("display","block")}).on("mouseout",function(){n.css("display","none")});var s=c=Cookie.getCookie("uname");function l(e){document.getElementById("lis").innerHTML=e.data.map(function(e){return'<li class="goods" data-id= "'+e.id+'"><img src= "'+e.imgurl+'"  /><span>'+e.price+"</span><br/> <p>"+e.goodname+"</p><p>"+e.jies+"</p><span>Heat :"+e.rd+"</span></li>"}).join(""),$goods=a(".goods"),$goods.on("click",function(){location.href="../html/xqy.html?id="+a(this)[0].dataset.id});var t=document.querySelector(".page"),n=Math.ceil(e.len/e.qty);t.innerHTML="";for(var s=1;s<=n;s++){var l=document.createElement("span");(l.innerHTML=s)==e.currentPage&&l.classList.add("active"),t.appendChild(l)}}c_start=document.cookie.indexOf("uname="),-1==c_start?(a("#unm").show(),a("#logined").hide(),a("#loginout").hide()):(a("#unm").hide(),a("#loginout").css("display","inline-block"),a("#logined").append(value="欢迎你，"+c),a("#logined").css("display","inline-block"),a("#loginout").on("click",function(){var e=new Date;e.setDate(e.getDate()-1),Cookie.setCookie("uname","",e,"/"),window.location.href="../index.html"})),console.log(s),a("#dd,#dda").on("click",function(){window.location.href=s?"../html/gwc.html":(alert("请先登录后查看"),"../html/login.html")}),a.ajax({type:"GET",url:"../api/list_render.php",data:{qty:20,currentPage:1},success:function(e){var t=JSON.parse(e);console.log(t),l(t)}}),document.querySelector(".page").onclick=function(e){"SPAN"==e.target.tagName&&(currentPage=e.target.innerHTML,a.ajax({type:"GET",url:"../api/list_render.php",data:{qty:20,currentPage:currentPage},success:function(e){var t=JSON.parse(e);console.log(t),l(t)}}))};var c=getRandomNum(1,123);a.ajax({type:"GET",url:"../api/list_render.php",data:{a:c},success:function(e){var t,n,s,l=JSON.parse(e);console.log(l),t=l,n=document.getElementById("xrr"),s="<h2>为您推荐</h2>"+(s=t.data.map(function(e){return'<li  class="goods" data-id="'+e.id+'"><img src="'+e.imgurl+'" alt="" /><span>特价：</span><span>'+e.price+"</span><p>"+e.goodname+"</p></li>"}).join("")),n.innerHTML=s,$goods=a(".goods"),$goods.on("click",function(){location.href="../html/xqy.html?id="+a(this)[0].dataset.id})}}),a("#select1 dd").click(function(){if(a(this).addClass("selected").siblings().removeClass("selected"),a(this).hasClass("select-all"))a("#selectA").remove();else{var e=a(this).clone(),t=a(this).attr("data-id");0<a("#selectA").length?(a("#selectA a").html(a(this).text()),a("#selectA input").attr("value",t)):(a(".select-result dl").append(e.attr("id","selectA")),a("#selectA").append('<input type="hidden" id="type1" name="type1" value="'+t+'" />'))}a("#selectA").on("click",function(){a(this).remove(),a("#select1 .select-all").addClass("selected").siblings().removeClass("selected")})}),a("#select2 dd").click(function(){if(a(this).addClass("selected").siblings().removeClass("selected"),a(this).hasClass("select-all"))a("#selectB").remove();else{var e=a(this).clone(),t=a(this).attr("data-id");0<a("#selectB").length?(a("#selectB a").html(a(this).text()),a("#selectB input").attr("value",t)):(a(".select-result dl").append(e.attr("id","selectB")),a("#selectB").append('<input type="hidden" id="type2" name="type2" value="'+t+'" />'))}a("#selectB").on("click",function(){a(this).remove(),a("#select2 .select-all").addClass("selected").siblings().removeClass("selected")})}),a(".select dd").on("click",function(){1<a(".select-result dd").length?a(".select-no").hide():a(".select-no").show()});var i=a("#select1 dd"),o=a("#select2 dd");i.siblings().hasClass("selected")&&o.siblings().hasClass("selected")?a(".select-no").show():a(".select-no").hide();var d=document.getElementById("Heat"),r=document.getElementById("def"),u=document.getElementById("Price"),p=0;r.onclick=function(){location.reload()},u.onclick=function(){var e=++p%2;a.ajax({type:"GET",url:"../api/list_render.php",data:{zt:1,b:e,qty:20},success:function(e){var t=JSON.parse(e);console.log(t),l(t)}})},d.onclick=function(){var e=++p%2;a.ajax({type:"GET",url:"../api/list_render.php",data:{zt:2,b:e,qty:20},success:function(e){l(JSON.parse(e))}})};var m=document.getElementById("text5");m.onclick=function(){clearInterval(m.timer),m.timer=setInterval(function(){window.scrollY<=0&&clearInterval(m.timer),window.scrollBy(0,-70)},30)}})});